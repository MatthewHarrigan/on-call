const { processCalendarEvents } = require("../processCalendarEvents");

const {
  response: { events },
} = require("./mockEventsResponse.js");

const { bankHolidays } = require("./mockBankHolidaysResponse.js");

const { costCentre, staff } = require("./mockConfig.json");

const out = [
  {
    timesheet: "Mar-Apr",
    start: "2021-03-17T00:00:00.000Z",
    end: "2021-03-23T00:00:00.000Z",
    staffNumber: "524870J",
    name: "Todd Bonzalez",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Mar-Apr",
    start: "2021-03-24T00:00:00.000Z",
    end: "2021-03-30T00:00:00.000Z",
    staffNumber: "527770W",
    name: "Bobson Dugnutt",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Mar-Apr",
    start: "2021-03-31T00:00:00.000Z",
    end: "2021-04-06T00:00:00.000Z",
    staffNumber: "506352B",
    name: "Willie Dustice",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 2,
  },
  {
    timesheet: "Apr-May",
    start: "2021-04-07T00:00:00.000Z",
    end: "2021-04-13T00:00:00.000Z",
    staffNumber: "553398E",
    name: "Dorse O Hintline",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Apr-May",
    start: "2021-04-14T00:00:00.000Z",
    end: "2021-04-20T00:00:00.000Z",
    staffNumber: "524870J",
    name: "Todd Bonzalez",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Apr-May",
    start: "2021-04-21T00:00:00.000Z",
    end: "2021-04-27T00:00:00.000Z",
    staffNumber: "527770W",
    name: "Bobson Dugnutt",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Apr-May",
    start: "2021-04-28T00:00:00.000Z",
    end: "2021-05-04T00:00:00.000Z",
    staffNumber: "506352B",
    name: "Willie Dustice",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 1,
  },
  {
    timesheet: "May-Jun",
    start: "2021-05-05T00:00:00.000Z",
    end: "2021-05-11T00:00:00.000Z",
    staffNumber: "553398E",
    name: "Dorse O Hintline",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "May-Jun",
    start: "2021-05-12T00:00:00.000Z",
    end: "2021-05-12T00:00:00.000Z",
    staffNumber: "524870J",
    name: "Todd Bonzalez",
    cost: "S3823",
    weekdays: 1,
    weekends: 0,
    bankHols: 0,
  },
  {
    timesheet: "May-Jun",
    start: "2021-05-13T00:00:00.000Z",
    end: "2021-05-18T00:00:00.000Z",
    staffNumber: "506352B",
    name: "Willie Dustice",
    cost: "S3823",
    weekdays: 4,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "May-Jun",
    start: "2021-05-19T00:00:00.000Z",
    end: "2021-05-25T00:00:00.000Z",
    staffNumber: "527770W",
    name: "Bobson Dugnutt",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "May-Jun",
    start: "2021-05-26T00:00:00.000Z",
    end: "2021-06-01T00:00:00.000Z",
    staffNumber: "506352B",
    name: "Willie Dustice",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 1,
  },
  {
    timesheet: "Jun-Jul",
    start: "2021-06-02T00:00:00.000Z",
    end: "2021-06-08T00:00:00.000Z",
    staffNumber: "553398E",
    name: "Dorse O Hintline",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Jun-Jul",
    start: "2021-06-09T00:00:00.000Z",
    end: "2021-06-15T00:00:00.000Z",
    staffNumber: "524870J",
    name: "Todd Bonzalez",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Jun-Jul",
    start: "2021-06-16T00:00:00.000Z",
    end: "2021-06-22T00:00:00.000Z",
    staffNumber: "527770W",
    name: "Bobson Dugnutt",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Jun-Jul",
    start: "2021-06-23T00:00:00.000Z",
    end: "2021-06-29T00:00:00.000Z",
    staffNumber: "506352B",
    name: "Willie Dustice",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Jun-Jul",
    start: "2021-06-30T00:00:00.000Z",
    end: "2021-07-06T00:00:00.000Z",
    staffNumber: "553398E",
    name: "Dorse O Hintline",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Jul-Aug",
    start: "2021-07-07T00:00:00.000Z",
    end: "2021-07-13T00:00:00.000Z",
    staffNumber: "524870J",
    name: "Todd Bonzalez",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Jul-Aug",
    start: "2021-07-14T00:00:00.000Z",
    end: "2021-07-20T00:00:00.000Z",
    staffNumber: "527770W",
    name: "Bobson Dugnutt",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Jul-Aug",
    start: "2021-07-21T00:00:00.000Z",
    end: "2021-07-27T00:00:00.000Z",
    staffNumber: "506352B",
    name: "Willie Dustice",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Jul-Aug",
    start: "2021-07-28T00:00:00.000Z",
    end: "2021-08-03T00:00:00.000Z",
    staffNumber: "553398E",
    name: "Dorse O Hintline",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Aug-Sep",
    start: "2021-08-04T00:00:00.000Z",
    end: "2021-08-10T00:00:00.000Z",
    staffNumber: "527770W",
    name: "Bobson Dugnutt",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Aug-Sep",
    start: "2021-08-11T00:00:00.000Z",
    end: "2021-08-17T00:00:00.000Z",
    staffNumber: "506352B",
    name: "Willie Dustice",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Aug-Sep",
    start: "2021-08-18T00:00:00.000Z",
    end: "2021-08-24T00:00:00.000Z",
    staffNumber: "553398E",
    name: "Dorse O Hintline",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Aug-Sep",
    start: "2021-08-25T00:00:00.000Z",
    end: "2021-08-31T00:00:00.000Z",
    staffNumber: "527770W",
    name: "Bobson Dugnutt",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 1,
  },
  {
    timesheet: "Sep-Oct",
    start: "2021-09-01T00:00:00.000Z",
    end: "2021-09-07T00:00:00.000Z",
    staffNumber: "553398E",
    name: "Dorse O Hintline",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Sep-Oct",
    start: "2021-09-08T00:00:00.000Z",
    end: "2021-09-14T00:00:00.000Z",
    staffNumber: "527770W",
    name: "Bobson Dugnutt",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Sep-Oct",
    start: "2021-09-15T00:00:00.000Z",
    end: "2021-09-21T00:00:00.000Z",
    staffNumber: "506352B",
    name: "Willie Dustice",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Sep-Oct",
    start: "2021-09-22T00:00:00.000Z",
    end: "2021-09-28T00:00:00.000Z",
    staffNumber: "506352B",
    name: "Willie Dustice",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
  {
    timesheet: "Sep-Oct",
    start: "2021-09-29T00:00:00.000Z",
    end: "2021-10-05T00:00:00.000Z",
    staffNumber: "553398E",
    name: "Dorse O Hintline",
    cost: "S3823",
    weekdays: 5,
    weekends: 2,
    bankHols: 0,
  },
];

describe("processCalendarEvents", () => {
  test("it processes calendar events", () => {
    const processed = processCalendarEvents(
      events,
      bankHolidays,
      staff,
      costCentre
    );
    expect(processed).toEqual(out);
  });
  // test("it errors if unexpected user in response", () => {
  //   const {
  //     response: { events },
  //   } = require("./mockEventsResponseWithUnexpectedUser.js");

  //   const processed = processCalendarEvents(
  //     events,
  //     bankHolidays,
  //     staff,
  //     costCentre
  //   );
  // });
});
